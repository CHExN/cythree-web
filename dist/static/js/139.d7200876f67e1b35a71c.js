webpackJsonp([139],{PMnZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Dd8w"),o=a.n(r),i=a("fZjL"),n=a.n(i),s=a("+6Bu"),m=a.n(s),l=a("p1UK"),c=a("Zz1P"),d=a.n(c);d.a.locale("zh-cn");var f={labelCol:{span:4},wrapperCol:{span:17}},u={name:"ContractInsideEdit",components:{StaffInsideList:l.default},props:{contractInsideEditVisiable:{default:!1}},data:function(){return{id:"",loading:!1,formItemLayout:f,form:this.$form.createForm(this),staffInsideList:{visiable:!1},staffId:"",fileNumData:["编内合同制","编内固定工"]}},methods:{reset:function(){this.loading=!1,this.form.resetFields()},onClose:function(){this.reset(),this.$emit("close")},untied:function(){var t=this;this.loading=!0,this.$put("contractInside",{id:this.id,staffId:0}).then(function(e){t.loading=!1,t.$message.success("解除绑定成功"),t.staffId="",t.form.getFieldDecorator("name"),t.form.setFieldsValue({name:""}),t.$emit("untied")})},selectName:function(){this.staffInsideList.visiable=!0},handleStaffInsideListChange:function(t,e){this.form.getFieldDecorator("name"),this.form.setFieldsValue({name:t}),this.staffId=e},handleStaffInsideListClose:function(){this.staffInsideList.visiable=!1},setFormValues:function(t){var e=this,a=m()(t,[]);this.id=a.id;var r={};n()(a).forEach(function(t){e.form.getFieldDecorator(t),r[t]=a[t]}),["contractLaborStart","contractLaborEnd","jobAgreementStart","jobAgreementEnd"].forEach(function(t){r[t]&&(r[t]=d()(r[t]))}),this.staffId=a.staffId,this.form.setFieldsValue(r)},handleSubmit:function(){var t=this;this.form.validateFields(function(e,a){if(e)t.$message.warning("格式出错，请检查表单");else{var r=a.contractLaborStart,i=a.contractLaborEnd,n=a.jobAgreementStart,s=a.jobAgreementEnd,m=o()({id:t.id,staffId:t.staffId},a,{contractLaborStart:r?r.format("YYYY-MM-DD"):r,contractLaborEnd:i?i.format("YYYY-MM-DD"):i,jobAgreementStart:n?n.format("YYYY-MM-DD"):n,jobAgreementEnd:s?s.format("YYYY-MM-DD"):s});t.loading=!0,t.$put("contractInside",o()({},m)).then(function(e){t.reset(),t.$emit("success")}).catch(function(){t.loading=!1})}})},filterOption:function(t,e){return e.componentOptions.children[0].text.toUpperCase().indexOf(t.toUpperCase())>=0}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"53px"},attrs:{title:"修改编内合同",maskClosable:!1,width:"650",placement:"right",closable:!1,visible:t.contractInsideEditVisiable},on:{close:t.onClose}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",t._b({attrs:{label:"姓名"}},"a-form-item",t.formItemLayout,!1),[t.staffId?a("a-input-search",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}],attrs:{readOnly:"",placeholder:"姓名",autocomplete:"off"},on:{click:t.selectName,search:t.untied}},[a("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[t._v("解绑")])],1):a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}],attrs:{readOnly:"",autoFocus:"",placeholder:"姓名",autocomplete:"off"},on:{click:t.selectName}})],1),t._v(" "),a("a-form-item",t._b({attrs:{label:"档案编号"}},"a-form-item",t.formItemLayout,!1),[a("a-auto-complete",{directives:[{name:"decorator",rawName:"v-decorator",value:["fileNum"],expression:"['fileNum']"}],attrs:{placeholder:"档案编号",dataSource:t.fileNumData,allowClear:!0,filterOption:t.filterOption}})],1),t._v(" "),a("a-form-item",t._b({attrs:{label:"胸牌号码"}},"a-form-item",t.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["badNum"],expression:"['badNum']"}],attrs:{placeholder:"胸牌号码",autocomplete:"off"}})],1),t._v(" "),a("a-form-item",t._b({attrs:{label:"无固定期备注"}},"a-form-item",t.formItemLayout,!1),[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remarkOnFixedPeriod"],expression:"['remarkOnFixedPeriod']"}],attrs:{placeholder:"无固定期备注",autocomplete:"off"}})],1),t._v(" "),a("a-form-item",t._b({attrs:{label:"劳始日期"}},"a-form-item",t.formItemLayout,!1),[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["contractLaborStart"],expression:"['contractLaborStart']"}],staticStyle:{width:"100%"},attrs:{placeholder:"劳动合同起始日期",format:"YYYY-MM-DD"}})],1),t._v(" "),a("a-form-item",t._b({attrs:{label:"劳止日期"}},"a-form-item",t.formItemLayout,!1),[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["contractLaborEnd"],expression:"['contractLaborEnd']"}],staticStyle:{width:"100%"},attrs:{placeholder:"劳动合同结束日期",format:"YYYY-MM-DD"}})],1),t._v(" "),a("a-form-item",t._b({attrs:{label:"岗始日期"}},"a-form-item",t.formItemLayout,!1),[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["jobAgreementStart"],expression:"['jobAgreementStart']"}],staticStyle:{width:"100%"},attrs:{placeholder:"岗位协议起始日期",format:"YYYY-MM-DD"}})],1),t._v(" "),a("a-form-item",t._b({attrs:{label:"岗止日期"}},"a-form-item",t.formItemLayout,!1),[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["jobAgreementEnd"],expression:"['jobAgreementEnd']"}],staticStyle:{width:"100%"},attrs:{placeholder:"岗位协议结束日期",format:"YYYY-MM-DD"}})],1),t._v(" "),a("a-form-item",t._b({attrs:{label:"续签备注"}},"a-form-item",t.formItemLayout,!1),[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remarkRenew"],expression:"['remarkRenew']"}],attrs:{placeholder:"续签备注",autocomplete:"off"}})],1),t._v(" "),a("a-form-item",t._b({attrs:{label:"备注"}},"a-form-item",t.formItemLayout,!1),[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}],attrs:{placeholder:"备注",autocomplete:"off"}})],1)],1),t._v(" "),a("div",{staticClass:"drawer-bootom-button"},[a("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:t.onClose}},[a("a-button",{staticStyle:{"margin-right":".8rem"}},[t._v("取消")])],1),t._v(" "),a("a-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.handleSubmit}},[t._v("提交")])],1),t._v(" "),a("staff-inside-list",{attrs:{staffInsideListVisiable:t.staffInsideList.visiable,lowCause:"123123"},on:{change:t.handleStaffInsideListChange,close:t.handleStaffInsideListClose}})],1)},staticRenderFns:[]},v=a("VU/8")(u,p,!1,null,null,null);e.default=v.exports}});