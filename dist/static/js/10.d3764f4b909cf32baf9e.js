webpackJsonp([10,50,52,158],{ITj1:function(e,t){},JMfY:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Gu7T"),s=i.n(a),n=i("mvHQ"),o=i.n(n),r=i("Dd8w"),l=i.n(r),c=i("SJI6"),u={labelCol:{span:4},wrapperCol:{span:17,offset:1}},p={name:"OfficeSuppliesAdd",props:{officeSuppliesAddVisiable:{default:!1}},data:function(){return{loading:!1,formItemLayout:u,dataSource:[],tableIndex:0}},computed:l()({},Object(c.mapState)({user:function(e){return e.account.user}}),{columns:function(){return[{title:"物品名称",dataIndex:"name",width:"20%",scopedSlots:{customRender:"name"}},{title:"型号",dataIndex:"type",width:"15%",scopedSlots:{customRender:"type"}},{title:"数量",dataIndex:"amount",width:"15%",scopedSlots:{customRender:"amount"}},{title:"单位",dataIndex:"unit",width:"12%",scopedSlots:{customRender:"unit"}},{title:"备注",dataIndex:"remark",width:"23%",scopedSlots:{customRender:"remark"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"operation"}}]}}),methods:{reset:function(){this.loading=!1,this.dataSource=[]},onClose:function(){this.reset(),this.$emit("close")},handleSubmit:function(){var e=this,t=[];if(this.dataSource.forEach(function(e){!1===e.isNew&&!1===e.editable&&t.push(e)}),0!==t.length){var i=o()(t,function(e,t){return"key"===e||"editable"===e||"isNew"===e?void 0:t});this.loading=!0,this.$post("application",{typeApplication:3,deptId:this.user.deptId,planList:i}).then(function(t){e.reset(),e.$emit("success")}).catch(function(){e.loading=!1})}else this.$message.warning("计划单至少要有一条数据")},newRow:function(){this.tableIndex++,this.dataSource.push({key:this.tableIndex,name:"",type:"",unit:"",amount:1,remark:"",editable:!0,isNew:!0})},remove:function(e){var t=this.dataSource.filter(function(t){return t.key!==e});this.dataSource=t},saveRow:function(e){var t=this.dataSource.filter(function(t){return t.key===e})[0];t.editable=!1,t.isNew=!1},edit:function(e){var t=this.dataSource.filter(function(t){return t.key===e})[0];t.editable=!t.editable},cancle:function(e){this.dataSource.filter(function(t){return t.key===e})[0].editable=!1},handlePlanChange:function(e,t,i){var a=[].concat(s()(this.dataSource)),n=a.filter(function(e){return t===e.key})[0];n&&(n[i]=e,this.dataSource=a)}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"53px"},attrs:{title:"新增办公用品申请",maskClosable:!1,width:"920",placement:"right",closable:!1,visible:e.officeSuppliesAddVisiable},on:{close:e.onClose}},[i("a-table",{attrs:{columns:e.columns,dataSource:e.dataSource,pagination:!1},scopedSlots:e._u([e._l(["name","type","amount","unit","remark"],function(t,a){return{key:t,fn:function(s,n){return[n.editable?i("a-input",{key:t,staticStyle:{margin:"-5px 0"},attrs:{value:s,placeholder:e.columns[a].title},on:{change:function(i){return e.handlePlanChange(i.target.value,n.key,t)}}}):[e._v(e._s(s))]]}}}),{key:"amount",fn:function(t,a){return[a.editable||a.isNew?[i("a-input-number",{attrs:{min:.01,precision:2,formatter:function(e){return e},placeholder:"数量"},model:{value:a.amount,callback:function(t){e.$set(a,"amount",t)},expression:"record.amount"}})]:i("span",[e._v(e._s(t))])]}},{key:"operation",fn:function(t,a){return[a.editable?[a.isNew?i("span",[i("a",{on:{click:function(t){return e.saveRow(a.key)}}},[e._v("添加")]),e._v(" "),i("a-divider",{attrs:{type:"vertical"}}),e._v(" "),i("a-popconfirm",{attrs:{title:"是否要删除此行？"},on:{confirm:function(t){return e.remove(a.key)}}},[i("a",[e._v("删除")])])],1):i("span",[i("a",{on:{click:function(t){return e.saveRow(a.key)}}},[e._v("保存")]),e._v(" "),i("a-divider",{attrs:{type:"vertical"}}),e._v(" "),i("a",{on:{click:function(t){return e.cancle(a.key)}}},[e._v("取消")])],1)]:i("span",[i("a",{on:{click:function(t){return e.edit(a.key)}}},[e._v("编辑")]),e._v(" "),i("a-divider",{attrs:{type:"vertical"}}),e._v(" "),i("a-popconfirm",{attrs:{title:"是否要删除此行？"},on:{confirm:function(t){return e.remove(a.key)}}},[i("a",[e._v("删除")])])],1)]}}],null,!0)}),e._v(" "),i("a-button",{staticStyle:{width:"100%","margin-top":"16px","margin-bottom":"8px"},attrs:{type:"dashed",icon:"plus"},on:{click:e.newRow}},[e._v("新增物品")]),e._v(" "),i("div",{staticClass:"drawer-bootom-button"},[i("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:e.onClose}},[i("a-button",{staticStyle:{"margin-right":".8rem"}},[e._v("取消")])],1),e._v(" "),i("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},staticRenderFns:[]},f=i("VU/8")(p,d,!1,function(e){i("ITj1")},"data-v-b0a6ac58",null);t.default=f.exports},ZXhy:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("+6Bu"),s=i.n(a),n=i("Zz1P"),o=i.n(n);o.a.locale("zh-cn");var r={labelCol:{span:4},wrapperCol:{span:17}},l={name:"OfficeSuppliesEdit",props:{officeSuppliesEditVisiable:{default:!1}},data:function(){return{formItemLayout:r,form:this.$form.createForm(this),id:"",loading:!1}},methods:{onClose:function(){this.loading=!1,this.form.resetFields(),this.$emit("close")},setFormValues:function(e){var t=s()(e,[]);this.id=t.id,this.form.getFieldDecorator("createDate"),this.form.setFieldsValue({createDate:o()(t.createDate)})},handleSubmit:function(){var e=this;this.form.validateFields(function(t,i){t||(e.loading=!0,e.$put("application",{createDate:i.createDate.format("YYYY-MM-DD"),id:e.id}).then(function(t){e.loading=!1,e.$emit("success")}).catch(function(){e.loading=!1}))})}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"53px"},attrs:{title:"修改办公用品申请日期",maskClosable:!1,width:"650",placement:"right",closable:!1,visible:e.officeSuppliesEditVisiable},on:{close:e.onClose}},[i("a-form",{attrs:{form:e.form}},[i("a-form-item",e._b({attrs:{label:"申请日期"}},"a-form-item",e.formItemLayout,!1),[i("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["createDate",{rules:[{required:!0,message:"申请日期不能为空"}]}],expression:"['createDate',\n          {rules: [{ required: true, message: '申请日期不能为空'}]}\n        ]"}],staticStyle:{width:"100%"},attrs:{placeholder:"申请日期",format:"YYYY-MM-DD"}})],1)],1),e._v(" "),i("div",{staticClass:"drawer-bootom-button"},[i("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:e.onClose}},[i("a-button",{staticStyle:{"margin-right":".8rem"}},[e._v("取消")])],1),e._v(" "),i("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},staticRenderFns:[]},u=i("VU/8")(l,c,!1,null,null,null);t.default=u.exports},aY7u:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Gu7T"),s=i.n(a),n=i("fZjL"),o=i.n(n),r=i("Dd8w"),l=i.n(r),c=i("dC1H"),u=i("et8n"),p=i("SJI6"),d=c.a.Item,f={components:{AStepItemGroup:u.a.Group,AStepItem:u.a,DetailListItem:d,DetailList:c.a},name:"OfficeSuppliesInfo",props:{officeSuppliesInfoVisiable:{require:!0,default:!1},officeSuppliesInfoData:{require:!0}},data:function(){return{previewVisible:!1,previewImage:"",fileList:[],planList:[],reviewList:[],loading:!1}},computed:l()({},Object(p.mapState)({user:function(e){return e.account.user}}),{columns:function(){return[{title:"物品名称",dataIndex:"name"},{title:"型号",dataIndex:"type"},{title:"数量",dataIndex:"amount"},{title:"单位",dataIndex:"unit"},{title:"备注",dataIndex:"remark"}]},current:function(){return-1===this.officeSuppliesInfoData.process?this.officeSuppliesInfoData.step:this.officeSuppliesInfoData.step+this.officeSuppliesInfoData.process},status:function(){return 2===this.officeSuppliesInfoData.process?"finish":-1===this.officeSuppliesInfoData.process?"error":"process"}}),methods:{handleCancleClick:function(){this.$emit("close")},bell:function(e){var t=this,i=this.user.username+" 催了您一下办公用品申请单号为 "+this.officeSuppliesInfoData.num+" 的流程进度";this.$post("message",{message:i,sender:this.user.username,senderDept:this.user.deptName,addressee:e}).then(function(i){t.$message.success("已向 "+("logistics"===e?"行政后勤":e)+" 通知")})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0},handleChange:function(e){var t=e.file,i=e.fileList;e.event,"error"===t.status?this.$message.error(t.name+" 上传失败"):"removed"===t.status&&(this.fileList=i)},handleRemove:function(e){var t=this;"removed"===e.status&&t.$delete("application/deleteFile/"+e.uid).then(function(){t.$message.success(e.name+" 删除成功")})},handleNoPermissionRemove:function(e){e.status="done",this.$message.warning("您无此权限")},handleBeforeUpload:function(e){var t="image/jpeg"===e.type,i="image/png"===e.type;t||i||this.$message.error("You can only upload JPG or PNG file!");var a=e.size/1024/1024<2;return a||this.$message.error("Image must smaller than 2MB!"),(t||i)&&a},customRequest:function(e){var t=this,i=e.data,a=e.file,n=e.filename,r=e.onError,l=e.onProgress,c=e.onSuccess,u=new FormData;return i&&o()(i).map(function(e){u.append(e,i[e])}),u.append(n,a),u.append("id",this.officeSuppliesInfoData.id),this.$upload("application/uploadApplicationPhoto",u,{onUploadProgress:function(e){var t=e.total,i=e.loaded;l({percent:Math.round(i/t*100).toFixed(2)},a)}}).then(function(e){t.$message.success(a.name+" 上传成功"),t.fileList=[].concat(s()(t.fileList),[e.data.data]),c(e.data.data,a)}).catch(r),{abort:function(){this.$message.warning("upload progress is aborted.")}}}},watch:{officeSuppliesInfoVisiable:function(){var e=this;this.officeSuppliesInfoVisiable&&(this.reviewList=this.officeSuppliesInfoData.review.split(","),this.loading=!0,this.$get("application/applicationPlan",{applicationId:this.officeSuppliesInfoData.id}).then(function(t){e.loading=!1,e.planList=t.data}),this.$get("application/applicationFiles",{applicationId:this.officeSuppliesInfoData.id}).then(function(t){e.fileList=t.data.data}))}}},h={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-modal",{attrs:{title:"办公用品申请信息",centered:!0,width:1e3,visible:e.officeSuppliesInfoVisiable,keyboard:!1,footer:null},on:{cancel:e.handleCancleClick}},[i("a-card",{attrs:{bordered:!1}},[i("a-steps",{attrs:{progressDot:"",current:e.current,status:e.status}},[i("a-step",{attrs:{title:"创建"}},[i("a-step-item-group",{attrs:{slot:"description"},slot:"description"},[i("a-step-item",{staticStyle:{cursor:"default"},attrs:{title:e.officeSuppliesInfoData.createDate}})],1)],1),e._v(" "),e._l(e.reviewList,function(t,a){return[i("a-step",{key:a,attrs:{title:"后勤"}},[i("a-step-item-group",{attrs:{slot:"description"},slot:"description"},[e.current===a+1&&0===e.officeSuppliesInfoData.process&&t!==e.user.username?i("a-step-item",{attrs:{title:"催一下",icon:"bell"},nativeOn:{click:function(i){return e.bell(t)}}}):e.current>a+1||1===e.officeSuppliesInfoData.process?i("a-step-item",{staticStyle:{cursor:"default"},attrs:{title:"审核通过",icon:"check-circle"}}):e.current===a+1&&-1===e.officeSuppliesInfoData.process?i("a-step-item",{staticStyle:{cursor:"default"},attrs:{title:"审核未通过",icon:"exclamation-circle"}}):e._e()],1)],1)]}),e._v(" "),i("a-step",{attrs:{title:"待入库"}},[i("a-step-item-group",{attrs:{slot:"description"},slot:"description"},[1===e.officeSuppliesInfoData.process?i("a-step-item",{attrs:{title:"催一下",icon:"bell"},nativeOn:{click:function(t){return e.bell("logistics")}}}):2===e.officeSuppliesInfoData.process?i("a-step-item",{staticStyle:{cursor:"default"},attrs:{title:"已入库",icon:"check-circle"}}):e._e()],1)],1),e._v(" "),i("a-step",{attrs:{title:"完成"}})],2),e._v(" "),i("a-divider",{staticStyle:{"margin-bottom":"32px"}})],1),e._v(" "),i("a-card",{attrs:{bordered:!1}},[i("detail-list",[i("a-table",{ref:"TableInfo",attrs:{columns:e.columns,dataSource:e.planList,pagination:!1,loading:e.loading,rowKey:"id"}})],1),e._v(" "),i("div",{staticStyle:{"margin-top":"32px"}},[i("div",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"application:addDeletePhoto",expression:"'application:addDeletePhoto'"}]},[i("a-upload",{attrs:{accept:"image/jpg,image/png,image/jpeg,image/bmp",listType:"picture-card",fileList:e.fileList,remove:e.handleRemove,customRequest:e.customRequest,beforeUpload:e.handleBeforeUpload},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<8?i("div",[i("a-icon",{attrs:{type:"plus"}}),e._v(" "),i("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),e._v(" "),i("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),e._v(" "),i("div",{directives:[{name:"hasNoPermission",rawName:"v-hasNoPermission",value:"application:addDeletePhoto",expression:"'application:addDeletePhoto'"}]},[i("a-upload",{attrs:{accept:"image/jpg,image/png,image/jpeg,image/bmp",listType:"picture-card",fileList:e.fileList,remove:e.handleNoPermissionRemove,customRequest:e.customRequest,beforeUpload:e.handleBeforeUpload},on:{preview:e.handlePreview,change:e.handleChange}}),e._v(" "),i("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)])],1)],1)},staticRenderFns:[]},m=i("VU/8")(f,h,!1,function(e){i("bpeE")},"data-v-c96efd4a",null);t.default=m.exports},bpeE:function(e,t){},fhwz:function(e,t){},vkU0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("fZjL"),s=i.n(a),n=i("mvHQ"),o=i.n(n),r=i("Dd8w"),l=i.n(r),c=i("JpjP"),u=i("aY7u"),p=i("JMfY"),d=i("ZXhy"),f=i("/XKx"),h=i("SJI6"),m=i("Mc2z"),v={name:"OfficeSupplies",components:{RangeDate:c.a,OfficeSuppliesInfo:u.default,OfficeSuppliesAdd:p.default,OfficeSuppliesEdit:d.default,PutAdd:f.default},data:function(){return{advanced:!1,modalVisible:!1,dateData:{dateForm:{}},officeSuppliesInfo:{visiable:!1,data:{}},officeSuppliesAdd:{visiable:!1},officeSuppliesEdit:{visiable:!1},putAdd:{visiable:!1},queryParams:{createTimeFrom:"",createTimeTo:""},filteredInfo:null,sortedInfo:null,paginationInfo:null,dataSource:[],selectedRowKeys:[],putingData:{},loading:!1,pagination:{pageSizeOptions:["10","20","30","40","100"],defaultCurrent:1,defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:function(e,t){return"显示 "+t[0]+" ~ "+t[1]+" 条记录，共 "+e+" 条记录"}}}},computed:l()({},Object(h.mapState)({user:function(e){return e.account.user}}),{columns:function(){var e=this.$createElement,t=this.sortedInfo,i=this.filteredInfo;return t=t||{},i=i||{},[{title:"申请部门",dataIndex:"deptName"},{title:"申请日期",dataIndex:"createDate",sorter:!0,sortOrder:"createDate"===t.columnKey&&t.order},{title:"流程状态",dataIndex:"process",customRender:function(t,i,a){switch(t){case 2:return e("a-tag",{attrs:{color:"green"}},["已入库"]);case 1:return e("a-tag",{attrs:{color:"cyan"}},["已通过"]);case 0:return e("a-tag",{attrs:{color:"purple"}},["待审核"]);case-1:return e("a-tag",{attrs:{color:"pink"}},["未通过"]);default:return t}},filters:[{text:"未通过",value:"-1"},{text:"待审核",value:"0"},{text:"已通过",value:"1"},{text:"已入库",value:"2"}],filterMultiple:!1,filteredValue:i.process||null},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},fixed:"right",width:150}]}}),mounted:function(){this.fetch()},methods:{viewDist:function(){var e=this;"{}"!==o()(this.dateData.dateForm)?(this.modalVisible=!1,this.$get("storeroom/officeSupplies",{date:this.dateData.dateForm.year+"-"+this.dateData.dateForm.month}).then(function(t){var i={};t.data.forEach(function(e){i[e.toDeptName]?i[e.toDeptName].push([e.name,e.type,e.amount,e.date,e.remark]):i[e.toDeptName]=[[e.name,e.type,e.amount,e.date,e.remark]]}),e.$message.loading("正在生成",3,function(){s()(i).forEach(function(t){var a=Object(m.d)("OfficeSuppliesApplicationForm");a=Object(m.a)(a,"OfficeSuppliesApplicationForm",{deptName:"部门: "+t,date:e.dateData.dateForm.year+"年"+e.dateData.dateForm.month+"月"}),a=Object(m.b)(a,"OfficeSuppliesApplicationForm",i[t]);var s="办公用品申领单_"+t+"_"+e.dateData.dateForm.year+"-"+e.dateData.dateForm.month+".xlsx";Object(m.e)(a,s),Object(m.c)(a,"OfficeSuppliesApplicationForm",i[t].length)})})})):this.$message.warning("请选择查看月份")},handleMonthChange:function(e){if(!e)return this.dateData.dateForm={},void(this.dateTitle="");this.dateData.dateForm={year:e.format("YYYY"),month:e.format("MM")},this.dateTitle=e.format("YYYY年MM月")},onSelectChange:function(e){this.selectedRowKeys=e},isPass:function(e,t){var i=this,a={id:t.id,createDate:t.createDate,typeApplication:t.typeApplication,process:0,username:t.username};e?t.review.split(",").length===t.step?a.process=1:a.step=t.step+1:a.process=-1,this.loading=!0,this.$put("application",l()({},a)).then(function(e){i.fetch(),i.$message.success("操作成功")})},view:function(e){this.officeSuppliesInfo.data=e,this.officeSuppliesInfo.visiable=!0},add:function(){this.officeSuppliesAdd.visiable=!0},handleOfficeSuppliesAddClose:function(){this.officeSuppliesAdd.visiable=!1},handleOfficeSuppliesAddSuccess:function(){this.officeSuppliesAdd.visiable=!1,this.$message.success("新增办公用品申请成功"),this.search()},edit:function(e){this.$refs.officeSuppliesEdit.setFormValues(e),this.officeSuppliesEdit.visiable=!0},handleOfficeSuppliesEditClose:function(){this.officeSuppliesEdit.visiable=!1},handleOfficeSuppliesEditSuccess:function(){this.officeSuppliesEdit.visiable=!1,this.$message.success("修改办公用品申请成功"),this.search()},storage:function(e){var t=this;this.putingData=e,this.$get("application/applicationPlan",{applicationId:this.putingData.id}).then(function(i){t.$refs.putAdd.setTableValues(e.typeApplication,i.data)}),this.putAdd.visiable=!0},handlePutAddClose:function(){this.putAdd.visiable=!1},handlePutAddSuccess:function(){var e=this;this.putAdd.visiable=!1,this.$message.success("新增入库成功"),this.loading=!0,this.$put("application",{id:this.putingData.id,createDate:this.putingData.createDate,typeApplication:this.putingData.typeApplication,username:this.putingData.username,process:2}).then(function(t){e.search(),e.putingData={}})},handleOfficeSuppliesInfoClose:function(){this.officeSuppliesInfo.visiable=!1},handleTypeOfficeSuppliesChange:function(e){this.queryParams.typeApplication=e||""},handleDateChange:function(e){e&&(this.queryParams.createTimeFrom=e[0],this.queryParams.createTimeTo=e[1])},batchDelete:function(){if(this.selectedRowKeys.length){var e=this;this.$confirm({title:"确定删除所选中的记录?",content:"当您点击确定按钮后，这些记录将会被彻底删除",centered:!0,onOk:function(){e.$delete("application/"+e.selectedRowKeys.join(",")).then(function(){e.$message.success("删除成功"),e.selectedRowKeys=[],e.search()})},onCancel:function(){e.selectedRowKeys=[]}})}else this.$message.warning("请选择需要删除的记录")},showModal:function(){this.modalVisible=!0},search:function(){var e=this.sortedInfo,t=this.filteredInfo,i=void 0,a=void 0;e&&(i=e.field,a=e.order),this.fetch(l()({sortField:i,sortOrder:a},this.queryParams,t))},reset:function(){this.selectedRowKeys=[],this.$refs.TableInfo.pagination.current=this.pagination.defaultCurrent,this.paginationInfo&&(this.paginationInfo.current=this.pagination.defaultCurrent,this.paginationInfo.pageSize=this.pagination.defaultPageSize),this.filteredInfo=null,this.sortedInfo=null,this.queryParams={createTimeFrom:"",createTimeTo:""},this.putingData={},this.$refs.createTime.reset(),this.fetch()},handleTableChange:function(e,t,i){this.paginationInfo=e,this.filteredInfo=t,this.sortedInfo=i,this.officeSuppliesInfo.visiable=!1,this.fetch(l()({sortField:i.field,sortOrder:i.order},this.queryParams,t))},fetch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.paginationInfo?(this.$refs.TableInfo.pagination.current=this.paginationInfo.current,this.$refs.TableInfo.pagination.pageSize=this.paginationInfo.pageSize,t.pageSize=this.paginationInfo.pageSize,t.pageNum=this.paginationInfo.current):(t.pageSize=this.pagination.defaultPageSize,t.pageNum=this.pagination.defaultCurrent),this.$get("application",l()({},t,{typeApplication:3})).then(function(t){var i=t.data,a=l()({},e.pagination);a.total=i.total,e.dataSource=i.rows,e.pagination=a,e.loading=!1})}}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-card",{staticClass:"card-area",attrs:{bordered:!1}},[i("div",{class:e.advanced?"search":null},[i("a-form",{attrs:{layout:"horizontal"}},[i("div",{class:e.advanced?null:"fold"},[i("a-row",[i("a-col",{attrs:{md:12,sm:24}},[i("a-form-item",{attrs:{label:"申请日期",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[i("range-date",{ref:"createTime",on:{change:e.handleDateChange}})],1)],1)],1)],1),e._v(" "),i("span",{staticStyle:{float:"right",margin:"3px auto 1em"}},[i("a-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),i("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.reset}},[e._v("重置")])],1)])],1),e._v(" "),i("div",[i("div",{staticClass:"operator"},[i("a-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"officeSupplies:add",expression:"'officeSupplies:add'"}],attrs:{type:"primary",ghost:""},on:{click:e.add}},[e._v("新增")]),e._v(" "),i("a-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"officeSupplies:delete",expression:"'officeSupplies:delete'"}],on:{click:e.batchDelete}},[e._v("删除")]),e._v(" "),i("a-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"officeSupplies:view",expression:"'officeSupplies:view'"}],on:{click:e.showModal}},[e._v("导出申领单")]),e._v("\n       \n      "),i("a-modal",{staticStyle:{left:"-12%",top:"25%"},attrs:{title:"选择导出日期",mask:!1,maskClosable:!1,width:350,okText:"提交"},on:{ok:e.viewDist},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[i("a-month-picker",{staticStyle:{width:"100%"},on:{change:e.handleMonthChange}})],1)],1),e._v(" "),i("a-table",{ref:"TableInfo",attrs:{columns:e.columns,dataSource:e.dataSource,pagination:e.pagination,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},scroll:{x:900},rowKey:"id"},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"operation",fn:function(t,a){return[i("a-icon",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"officeSupplies:view",expression:"'officeSupplies:view'"}],attrs:{type:"setting",theme:"twoTone",twoToneColor:"#4a9ff5",title:"修改"},on:{click:function(t){return e.edit(a)}}}),e._v("\n         \n        "),i("a-icon",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"officeSupplies:view",expression:"'officeSupplies:view'"}],attrs:{type:"eye",theme:"twoTone",twoToneColor:"#42b983",title:"查看"},on:{click:function(t){return e.view(a)}}}),e._v("\n         \n        "),i("a-popconfirm",{attrs:{title:"是否通过此申请 ?",okText:"通过",cancelText:"不通过"},on:{confirm:function(t){return e.isPass(1,a)},cancel:function(t){return e.isPass(0,a)}}},[0===a.process&&a.review.split(",")[a.step-1]===e.user.username?i("a-icon",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"officeSupplies:update",expression:"'officeSupplies:update'"}],attrs:{type:"check-circle",theme:"twoTone",twoToneColor:"#9451ff",title:"确认"}}):e._e()],1),e._v(" "),1===a.process&&"wxclkg"!==e.user.username&&"lbbjkg"!==e.user.username?i("a-icon",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"storeroomPut:add",expression:"'storeroomPut:add'"}],attrs:{type:"database",theme:"twoTone",twoToneColor:"#01c9c4",title:"入库"},on:{click:function(t){return e.storage(a)}}}):e._e()]}}])})],1),e._v(" "),i("office-supplies-info",{attrs:{officeSuppliesInfoData:e.officeSuppliesInfo.data,officeSuppliesInfoVisiable:e.officeSuppliesInfo.visiable},on:{close:e.handleOfficeSuppliesInfoClose}}),e._v(" "),i("office-supplies-add",{attrs:{officeSuppliesAddVisiable:e.officeSuppliesAdd.visiable},on:{close:e.handleOfficeSuppliesAddClose,success:e.handleOfficeSuppliesAddSuccess}}),e._v(" "),i("office-supplies-edit",{ref:"officeSuppliesEdit",attrs:{officeSuppliesEditVisiable:e.officeSuppliesEdit.visiable},on:{close:e.handleOfficeSuppliesEditClose,success:e.handleOfficeSuppliesEditSuccess}}),e._v(" "),i("put-add",{ref:"putAdd",attrs:{putAddVisiable:e.putAdd.visiable},on:{close:e.handlePutAddClose,success:e.handlePutAddSuccess}})],1)},staticRenderFns:[]},S=i("VU/8")(v,g,!1,function(e){i("fhwz")},"data-v-0a602ed1",null);t.default=S.exports}});