webpackJsonp([48],{LEHY:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("mvHQ"),i=e.n(n),o=e("Dd8w"),s=e.n(o),r=e("bOdI"),l=e.n(r),c={name:"distWC",props:{storeroomDistWcVisiable:{default:!1},dateTitle:{require:!0},dateData:{require:!0}},data:function(){return{advanced:!1,dataSource:[],dictData:{},paginationInfo:null,queryParams:{},pagination:{size:"small",pageSizeOptions:["20","40","80","160"],defaultCurrent:1,defaultPageSize:20,showSizeChanger:!0,showTotal:function(a){return"共 "+a+" 条"}},loading:!1}},computed:{columns:function(){var a=this;return[{title:"公厕名称",dataIndex:"wcName"},{title:"公厕编号",dataIndex:"wcNum"},{title:"物品名称",dataIndex:"name"},{title:"物资类别",dataIndex:"typeApplication",customRender:function(t,e,n){return a.dictData.typeApplication[t]}},{title:"分配数量",dataIndex:"amount",scopedSlots:{customRender:"amount"},width:100},{title:"操作日期",dataIndex:"date",scopedSlots:{customRender:"date"}}]}},mounted:function(){},methods:{onClose:function(){this.$emit("close"),this.dataSource=[]},toggleAdvanced:function(){this.advanced=!this.advanced,this.advanced||(this.queryParams.name="",this.queryParams.wcName="")},handleTypeApplicationChange:function(a){this.queryParams.typeApplication=a||""},loadSelect:function(){var a=this;this.$get("dict/cy_storeroom",{}).then(function(t){var e={};t.data.forEach(function(t){var n=a.$tools.toHump(t.fieldName.toLowerCase());e[n]?e[n][t.keyy]=t.valuee:e[n]=l()({},t.keyy,t.valuee)}),a.dictData=e})},search:function(){this.fetch(s()({},this.queryParams))},reset:function(){this.$refs.TableInfo.pagination.current=this.pagination.defaultCurrent,this.paginationInfo&&(this.paginationInfo.current=this.pagination.defaultCurrent,this.paginationInfo.pageSize=this.pagination.defaultPageSize),this.paginationInfo=null,this.queryParams={},this.fetch()},handleTableChange:function(a,t,e){this.paginationInfo=a,this.fetch(s()({},this.queryParams))},fetch:function(){var a=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.paginationInfo?(this.$refs.TableInfo.pagination.current=this.paginationInfo.current,this.$refs.TableInfo.pagination.pageSize=this.paginationInfo.pageSize,t.pageSize=this.paginationInfo.pageSize,t.pageNum=this.paginationInfo.current):(t.pageSize=this.pagination.defaultPageSize,t.pageNum=this.pagination.defaultCurrent),this.$get("wcStoreroom",s()({yearForm:this.dateData.dateForm.year||"",monthForm:this.dateData.dateForm.month||"",yearTo:this.dateData.dateTo.year||"",monthTo:this.dateData.dateTo.month||""},t)).then(function(t){var e=t.data,n=s()({},a.pagination);n.total=e.total,a.loading=!1,a.dataSource=e.rows,a.pagination=n})}},watch:{storeroomDistWcVisiable:function(){this.storeroomDistWcVisiable&&("{}"===i()(this.dictData)&&this.loadSelect(),this.fetch())}}},d={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"53px"},attrs:{title:a.dateTitle+" 记录",maskClosable:!1,width:"1000",placement:"right",visible:a.storeroomDistWcVisiable},on:{close:a.onClose}},[e("div",{class:a.advanced?"search":null},[e("a-form",{attrs:{layout:"horizontal"}},[e("a-row",[e("div",{class:a.advanced?null:"fold"},[e("a-col",{attrs:{md:12,sm:24}},[e("a-form-item",{attrs:{label:"公厕编号",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-input",{model:{value:a.queryParams.wcNum,callback:function(t){a.$set(a.queryParams,"wcNum",t)},expression:"queryParams.wcNum"}})],1)],1),a._v(" "),e("a-col",{attrs:{md:12,sm:24}},[e("a-form-item",{attrs:{label:"物资类别",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-select",{attrs:{mode:"multiple",allowClear:!0},on:{change:a.handleTypeApplicationChange}},a._l(Object.keys(a.dictData.typeApplication||[]),function(t){return e("a-select-option",{key:t},[a._v(a._s(a.dictData.typeApplication[t]))])}),1)],1)],1),a._v(" "),a.advanced?[e("a-col",{attrs:{md:12,sm:24}},[e("a-form-item",{attrs:{label:"公厕名",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-input",{model:{value:a.queryParams.wcName,callback:function(t){a.$set(a.queryParams,"wcName",t)},expression:"queryParams.wcName"}})],1)],1),a._v(" "),e("a-col",{attrs:{md:12,sm:24}},[e("a-form-item",{attrs:{label:"物品名称",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-input",{model:{value:a.queryParams.name,callback:function(t){a.$set(a.queryParams,"name",t)},expression:"queryParams.name"}})],1)],1)]:a._e()],2),a._v(" "),e("span",{staticStyle:{float:"right",margin:"3px auto 1em"}},[e("a-button",{attrs:{type:"primary"},on:{click:a.search}},[a._v("查询")]),a._v(" "),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:a.reset}},[a._v("重置")]),a._v(" "),e("a",{staticStyle:{"margin-left":"8px"},on:{click:a.toggleAdvanced}},[a._v("\n            "+a._s(a.advanced?"收起":"展开")+"\n            "),e("a-icon",{attrs:{type:a.advanced?"up":"down"}})],1)],1)])],1)],1),a._v(" "),e("div",[e("a-table",{ref:"TableInfo",attrs:{columns:a.columns,dataSource:a.dataSource,pagination:a.pagination,loading:a.loading},on:{change:a.handleTableChange},scopedSlots:a._u([{key:"amount",fn:function(t){return[e("span",[a._v(a._s(a.$tools.addZero(t)))])]}},{key:"date",fn:function(t,n){return[e("span",[a._v(a._s([n.year,n.month,n.day].join("-")))])]}}])})],1)])},staticRenderFns:[]},u=e("VU/8")(c,d,!1,function(a){e("qtP8")},"data-v-cf6dfcf0",null);t.default=u.exports},qtP8:function(a,t){}});