webpackJsonp([61],{DqJ5:function(a,e){},ckdc:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t("Dd8w"),i=t.n(n),r=t("Mc2z"),o={name:"InsideAnnualLeave",props:{insideAnnualLeaveVisiable:{default:!1},yearValue:{require:!0}},data:function(){return{advanced:!1,dataSource:[],paginationInfo:null,queryParams:{},pagination:{size:"small",pageSizeOptions:["20","40","80","160"],defaultCurrent:1,defaultPageSize:20,showSizeChanger:!0,showTotal:function(a){return"共 "+a+" 条"}},loading:!1}},computed:{columns:function(){return[{title:"姓名",align:"center",dataIndex:"name"},{title:"参工日期",align:"center",dataIndex:"workDate"},{title:"工作年限",align:"center",dataIndex:"workingYears"},{title:"可休天数",align:"center",dataIndex:"vacationDays"},{title:"已休天数",align:"center",dataIndex:"alreadyDays"},{title:"剩余天数",align:"center",dataIndex:"remainingDays"},{title:"1月",align:"center",dataIndex:"january"},{title:"2月",align:"center",dataIndex:"february"},{title:"3月",align:"center",dataIndex:"march"},{title:"4月",align:"center",dataIndex:"april"},{title:"5月",align:"center",dataIndex:"may"},{title:"6月",align:"center",dataIndex:"june"},{title:"7月",align:"center",dataIndex:"july"},{title:"8月",align:"center",dataIndex:"august"},{title:"9月",align:"center",dataIndex:"september"},{title:"10月",align:"center",dataIndex:"october"},{title:"11月",align:"center",dataIndex:"november"},{title:"12月",align:"center",dataIndex:"december"}]}},methods:{onClose:function(){this.$emit("close"),this.dataSource=[]},exportExcel:function(){var a=this,e=void 0;this.pagination&&(e=this.pagination.total),this.$get("vacation/insideAnnualLeave",i()({},this.queryParams,{pageSize:e,day:this.yearValue})).then(function(e){var t=[];e.data.rows.forEach(function(e){e.workDate&&(e.workingYears=a.$tools.getAge(e.workDate),e.vacationDays=e.workingYears>=20?15:e.workingYears>=10?10:e.workingYears>=1?5:0,e.remainingDays=e.vacationDays-e.alreadyDays),t.push([e.name,e.workDate,e.workingYears,e.vacationDays,e.alreadyDays,e.remainingDays,e.january,e.february,e.march,e.april,e.may,e.june,e.july,e.august,e.september,e.october,e.november,e.december])}),a.$message.loading("正在生成",3,function(){var e=Object(r.d)("InsideAnnualLeave");e=Object(r.a)(e,"InsideAnnualLeave",{title:a.yearValue+"年编内人员年假统计"}),e=Object(r.b)(e,"InsideAnnualLeave",t);var n="编内人员年假统计_"+a.yearValue+".xlsx";Object(r.e)(e,n),Object(r.c)(e,"InsideAnnualLeave",t.length)})})},search:function(){this.fetch(i()({},this.queryParams))},reset:function(){this.$refs.TableInfo.pagination.current=this.pagination.defaultCurrent,this.paginationInfo&&(this.paginationInfo.current=this.pagination.defaultCurrent,this.paginationInfo.pageSize=this.pagination.defaultPageSize),this.paginationInfo=null,this.queryParams={},this.fetch()},handleTableChange:function(a,e,t){this.paginationInfo=a,this.fetch(i()({},this.queryParams))},fetch:function(){var a=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.paginationInfo?(this.$refs.TableInfo.pagination.current=this.paginationInfo.current,this.$refs.TableInfo.pagination.pageSize=this.paginationInfo.pageSize,e.pageSize=this.paginationInfo.pageSize,e.pageNum=this.paginationInfo.current):(e.pageSize=this.pagination.defaultPageSize,e.pageNum=this.pagination.defaultCurrent),this.$get("vacation/insideAnnualLeave",i()({},e,{day:this.yearValue})).then(function(e){a.dataSource=[];var t=e.data,n=i()({},a.pagination);n.total=t.total,a.loading=!1,t.rows.forEach(function(e){e.workDate&&(e.workingYears=a.$tools.getAge(e.workDate),e.vacationDays=e.workingYears>=20?15:e.workingYears>=10?10:e.workingYears>=1?5:0,e.remainingDays=e.vacationDays-e.alreadyDays),a.dataSource.push(e)}),a.pagination=n})}},watch:{insideAnnualLeaveVisiable:function(){this.insideAnnualLeaveVisiable&&this.fetch()}}},s={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"53px"},attrs:{title:a.yearValue+"年 编内年假统计",maskClosable:!1,width:"1300",placement:"right",visible:a.insideAnnualLeaveVisiable},on:{close:a.onClose}},[t("div",{class:a.advanced?"search":null},[t("a-form",{attrs:{layout:"horizontal"}},[t("a-row",[t("div",{class:a.advanced?null:"fold"},[t("a-col",{attrs:{md:12,sm:24}},[t("a-form-item",{attrs:{label:"姓名",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[t("a-input",{model:{value:a.queryParams.name,callback:function(e){a.$set(a.queryParams,"name",e)},expression:"queryParams.name"}})],1)],1)],1),a._v(" "),t("span",{staticStyle:{float:"right",margin:"3px auto 1em"}},[t("a-button",{attrs:{type:"primary"},on:{click:a.search}},[a._v("查询")]),a._v(" "),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:a.reset}},[a._v("重置")]),a._v("\n           \n          "),t("a-button",{attrs:{type:"primary",ghost:""},on:{click:a.exportExcel}},[a._v("导出")])],1)])],1)],1),a._v(" "),t("div",[t("a-table",{ref:"TableInfo",attrs:{bordered:"",columns:a.columns,dataSource:a.dataSource,pagination:a.pagination,loading:a.loading,rowKey:"staffId"},on:{change:a.handleTableChange}})],1)])},staticRenderFns:[]},l=t("VU/8")(o,s,!1,function(a){t("DqJ5")},"data-v-6d537754",null);e.default=l.exports}});