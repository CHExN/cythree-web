webpackJsonp([47],{gmrb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("dC1H"),n=a("et8n"),i=o.a.Item,r={components:{AStepItemGroup:n.a.Group,AStepItem:n.a,DetailListItem:i,DetailList:o.a},name:"StoreroomItemDetailsInfo",props:{storeroomItemDetailsInfoVisiable:{require:!0,default:!1},storeroomItemDetailsInfoData:{require:!0}},data:function(){return{dataSource:[],loading:!1}},computed:{columns:function(){return[{title:"日期",dataIndex:"date"},{title:"摘要",dataIndex:"info",scopedSlots:{customRender:"info"}},{title:"收入",children:[{title:"数量",dataIndex:"quantityPut"},{title:"单价",dataIndex:"unitPricePut"},{title:"金额",dataIndex:"amountPut"}]},{title:"发出",children:[{title:"数量",dataIndex:"quantityOut"},{title:"单价",dataIndex:"unitPriceOut"},{title:"金额",dataIndex:"amountOut"}]},{title:"结存",children:[{title:"数量",dataIndex:"quantity"},{title:"单价",dataIndex:"unitPrice"},{title:"金额",dataIndex:"amount"}]}]}},methods:{handleCancleClick:function(){this.dataSource=[],this.loading=!1,this.$emit("close")}},watch:{storeroomItemDetailsInfoVisiable:function(){var t=this;this.storeroomItemDetailsInfoVisiable&&(this.loading=!0,this.$get("storeroom/storeroomOutItem",{parentId:this.storeroomItemDetailsInfoData.parentId,id:this.storeroomItemDetailsInfoData.id}).then(function(e){t.loading=!1,t.dataSource.push({date:t.storeroomItemDetailsInfoData.date,info:"进"+t.storeroomItemDetailsInfoData.name,quantityPut:t.storeroomItemDetailsInfoData.amount,unitPricePut:t.storeroomItemDetailsInfoData.money,amountPut:t.$tools.accMul(t.storeroomItemDetailsInfoData.amount,t.storeroomItemDetailsInfoData.money),quantityOut:null,unitPriceOut:null,amountOut:null,quantity:null,unitPrice:null,amount:null});var a=t.dataSource[0].quantityPut,o=t.dataSource[0].amountPut,n=0,i=0;e.data.forEach(function(r,u){t.dataSource[0].date.split("-")[1]!==r.date.split("-")[1]&&(t.dataSource.push({date:null,info:"本月合计",quantityPut:t.storeroomItemDetailsInfoData.amount,unitPricePut:t.storeroomItemDetailsInfoData.money,amountPut:t.$tools.accMul(t.storeroomItemDetailsInfoData.amount,t.storeroomItemDetailsInfoData.money),quantityOut:n,unitPriceOut:t.storeroomItemDetailsInfoData.money,amountOut:i,quantity:a,unitPrice:0===a?"":t.storeroomItemDetailsInfoData.money,amount:o}),n=0,i=0),a-=r.amount,o-=t.$tools.accMul(r.amount,r.money),n+=r.amount,i+=t.$tools.accMul(r.amount,r.money),t.dataSource.push({date:r.date,info:"付"+r.toDeptName,quantityPut:null,unitPricePut:null,amountPut:null,quantityOut:r.amount,unitPriceOut:r.money,amountOut:t.$tools.accMul(r.amount,r.money),quantity:null,unitPrice:null,amount:null}),e.data.length===u+1&&(t.dataSource.push({date:null,info:"本月合计",quantityPut:0,unitPricePut:0,amountPut:0,quantityOut:n,unitPriceOut:t.storeroomItemDetailsInfoData.money,amountOut:i,quantity:a,unitPrice:0===a?0:t.storeroomItemDetailsInfoData.money,amount:o}),n=0,i=0)})}))}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"出入库物品明细信息",centered:!0,width:1e3,visible:t.storeroomItemDetailsInfoVisiable,keyboard:!1,footer:null},on:{cancel:t.handleCancleClick}},[a("a-card",{staticStyle:{"margin-bottom":"32px"},attrs:{bordered:!1}},[a("detail-list",[a("detail-list-item",{attrs:{term:"物品名称"}},[t._v(t._s(t.storeroomItemDetailsInfoData.name))]),t._v(" "),a("detail-list-item",{attrs:{term:"型号"}},[t._v(t._s(t.storeroomItemDetailsInfoData.unit))]),t._v(" "),a("detail-list-item",{attrs:{term:"入库数量"}},[t._v(t._s(t.storeroomItemDetailsInfoData.amount))]),t._v(" "),a("detail-list-item",{attrs:{term:"单位"}},[t._v(t._s(t.storeroomItemDetailsInfoData.unit))]),t._v(" "),a("detail-list-item",{attrs:{term:"单价"}},[t._v(t._s(t.$tools.addZero(t.$tools.toNumFormant(t.storeroomItemDetailsInfoData.money))))]),t._v(" "),a("detail-list-item",{attrs:{term:"物资类别"}},[t._v(t._s(t.storeroomItemDetailsInfoData.typeApplicationToDict))]),t._v(" "),a("detail-list-item",{attrs:{term:"供应商"}},[t._v(t._s(t.storeroomItemDetailsInfoData.supplierToDict))]),t._v(" "),a("detail-list-item",{attrs:{term:"入库日期"}},[t._v(t._s(t.storeroomItemDetailsInfoData.date))]),t._v(" "),a("detail-list-item",{attrs:{term:"入库单号"}},[t._v(t._s(t.storeroomItemDetailsInfoData.putNum))])],1),t._v(" "),a("a-divider",{staticStyle:{"margin-bottom":"32px"}}),t._v(" "),a("detail-list",{attrs:{title:"进付明细"}},[a("a-table",{ref:"TableInfo",attrs:{bordered:"",columns:t.columns,dataSource:t.dataSource,pagination:!1,loading:t.loading},scopedSlots:t._u([{key:"info",fn:function(e){return["进"===e.charAt(0)?a("span",[t._v("\n            进 "),a("a-tag",{attrs:{color:"cyan"}},[t._v(t._s(e.substring(1)||e))])],1):"付"===e.charAt(0)?a("span",[t._v("\n            付 "),a("a-tag",{attrs:{color:"purple"}},[t._v(t._s(e.substring(1)||e))])],1):a("span",[t._v(t._s(e))])]}}])})],1)],1)],1)},staticRenderFns:[]},l=a("VU/8")(r,u,!1,function(t){a("jAcF")},"data-v-d7d70504",null);e.default=l.exports},jAcF:function(t,e){}});