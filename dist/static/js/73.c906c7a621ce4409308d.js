webpackJsonp([73],{IGQA:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("Dd8w"),i=e.n(n),o=e("Mc2z"),r={name:"VacationInfo",props:{vacationInfoVisiable:{default:!1},yearValue:{require:!0},viewType:{require:!0}},data:function(){return{advanced:!1,dataSource:[],paginationInfo:null,queryParams:{},pagination:{size:"small",pageSizeOptions:["20","40","80","160"],defaultCurrent:1,defaultPageSize:20,showSizeChanger:!0,showTotal:function(a){return"共 "+a+" 条"}},loading:!1}},computed:{columns:function(){return[{title:"姓名",align:"center",dataIndex:"name"},{title:"1月",align:"center",dataIndex:"january"},{title:"2月",align:"center",dataIndex:"february"},{title:"3月",align:"center",dataIndex:"march"},{title:"4月",align:"center",dataIndex:"april"},{title:"5月",align:"center",dataIndex:"may"},{title:"6月",align:"center",dataIndex:"june"},{title:"7月",align:"center",dataIndex:"july"},{title:"8月",align:"center",dataIndex:"august"},{title:"9月",align:"center",dataIndex:"september"},{title:"10月",align:"center",dataIndex:"october"},{title:"11月",align:"center",dataIndex:"november"},{title:"12月",align:"center",dataIndex:"december"}]}},methods:{onClose:function(){this.$emit("close"),this.dataSource=[]},exportExcel:function(){var a=this,t=void 0;this.pagination&&(t=this.pagination.total),this.$get("vacation/insOutVacation",i()({},this.queryParams,{pageSize:t,day:this.yearValue,insOut:this.viewType})).then(function(t){var e=[];t.data.rows.forEach(function(a){e.push([a.name,a.january,a.february,a.march,a.april,a.may,a.june,a.july,a.august,a.september,a.october,a.november,a.december])}),a.$message.loading("正在生成",3,function(){var t=Object(o.d)("Vacation");t=Object(o.a)(t,"Vacation",{title:a.yearValue+"年 编"+(0===a.viewType?"内":"外")+"休假统计"}),t=Object(o.b)(t,"Vacation",e);var n="编"+(0===a.viewType?"内":"外")+"休假统计_"+a.yearValue+".xlsx";Object(o.e)(t,n),Object(o.c)(t,"Vacation",e.length)})})},search:function(){this.fetch(i()({},this.queryParams))},reset:function(){this.$refs.TableInfo.pagination.current=this.pagination.defaultCurrent,this.paginationInfo&&(this.paginationInfo.current=this.pagination.defaultCurrent,this.paginationInfo.pageSize=this.pagination.defaultPageSize),this.paginationInfo=null,this.queryParams={},this.fetch()},handleTableChange:function(a,t,e){this.paginationInfo=a,this.fetch(i()({},this.queryParams))},fetch:function(){var a=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.paginationInfo?(this.$refs.TableInfo.pagination.current=this.paginationInfo.current,this.$refs.TableInfo.pagination.pageSize=this.paginationInfo.pageSize,t.pageSize=this.paginationInfo.pageSize,t.pageNum=this.paginationInfo.current):(t.pageSize=this.pagination.defaultPageSize,t.pageNum=this.pagination.defaultCurrent),this.$get("vacation/insOutVacation",i()({},t,{day:this.yearValue,insOut:this.viewType})).then(function(t){var e=t.data,n=i()({},a.pagination);n.total=e.total,a.loading=!1,a.dataSource=e.rows,a.pagination=n})}},watch:{vacationInfoVisiable:function(){this.vacationInfoVisiable&&this.fetch()}}},l={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"53px"},attrs:{title:a.yearValue+"年 编"+(0===a.viewType?"内":"外")+"休假统计",maskClosable:!1,width:"1300",placement:"right",visible:a.vacationInfoVisiable},on:{close:a.onClose}},[e("div",{class:a.advanced?"search":null},[e("a-form",{attrs:{layout:"horizontal"}},[e("a-row",[e("div",{class:a.advanced?null:"fold"},[e("a-col",{attrs:{md:12,sm:24}},[e("a-form-item",{attrs:{label:"姓名",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-input",{model:{value:a.queryParams.name,callback:function(t){a.$set(a.queryParams,"name",t)},expression:"queryParams.name"}})],1)],1)],1),a._v(" "),e("span",{staticStyle:{float:"right",margin:"3px auto 1em"}},[e("a-button",{attrs:{type:"primary"},on:{click:a.search}},[a._v("查询")]),a._v(" "),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:a.reset}},[a._v("重置")]),a._v("\n           \n          "),e("a-button",{attrs:{type:"primary",ghost:""},on:{click:a.exportExcel}},[a._v("导出")])],1)])],1)],1),a._v(" "),e("div",[e("a-table",{ref:"TableInfo",attrs:{bordered:"",columns:a.columns,dataSource:a.dataSource,pagination:a.pagination,loading:a.loading,rowKey:"staffId"},on:{change:a.handleTableChange}})],1)])},staticRenderFns:[]},s=e("VU/8")(r,l,!1,function(a){e("oAgZ")},"data-v-49ea1f98",null);t.default=s.exports},oAgZ:function(a,t){}});